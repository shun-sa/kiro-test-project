# 実装計画

## 概要

この実装計画は、30代金融系ITエンジニア向けFinTech News Appを段階的に構築するためのタスクリストです。各タスクはユーザーストーリー（要件）ごとに整理されており、実装後に動作確認とテストを行います。

## 開発アプローチ

**Phase 1: ローカル開発環境（モックデータ）**
- Vite + React + TypeScript でローカル開発環境構築
- MSW（Mock Service Worker）でモックAPI実装
- AWS環境なしで画面・機能の動作確認
- 迅速なUI/UX開発とイテレーション

**Phase 2: AWS統合（本番環境）**
- AWS Amplify + AppSync + DynamoDB構築
- モックAPIから本番APIへの切り替え
- Lambda関数デプロイ
- 本番環境での動作確認

## 実装タスク

### フェーズ0: プロジェクト基盤構築

- [ ] 0.1 開発環境セットアップ
  - [ ] 0.1.1 プロジェクト初期化
    - Vite + React + TypeScript プロジェクト作成
    - 必要なパッケージインストール（React Router、Tailwind CSS、Framer Motion、Zustand）
    - フォルダ構造作成（src/components, src/hooks, src/store, src/mocks等）
    - 基本的なルーティング設定

  - [ ] 0.1.2 モックデータ環境構築
    - MSW（Mock Service Worker）セットアップ
    - モックデータ定義（articles.ts, categories.ts）
    - モックAPIハンドラー実装（記事一覧、詳細、カテゴリ、検索）
    - 環境変数設定（.env.local）

  - [ ] 0.1.3 基本レイアウト実装
    - Header コンポーネント作成
    - レスポンシブレイアウト（モバイル・PC対応）
    - 基本的なナビゲーション
    - **動作確認**: ローカルサーバー起動、基本画面表示

### フェーズ1: 要件2対応 - シンプルで直感的なUI

**ユーザーストーリー**: めんどくさがりなエンジニアとして、スマホとPCの両方でシンプルで直感的なインターフェースでニュースを閲覧したい

- [ ] 1.1 レスポンシブデザイン実装
  - [ ] 1.1.1 レイアウトコンポーネント作成
    - Sidebar コンポーネント（PC版）
    - BottomNavigation コンポーネント（モバイル版）
    - レスポンシブ切り替えロジック
    - Tailwind CSS ブレークポイント設定

  - [ ] 1.1.2 カテゴリフィルター実装
    - CategoryFilter コンポーネント作成
    - ワンタップ・ワンクリックでカテゴリ切り替え
    - 選択状態の視覚的フィードバック
    - **動作確認**: スマホ・PC両方でカテゴリ切り替え動作
    - _要件: 2.1, 2.2_

  - [ ] 1.1.3 ニュース一覧表示
    - NewsCard コンポーネント作成
    - 記事タイトルと要約を3行以内で表示
    - レスポンシブカードレイアウト
    - モックデータでの表示確認
    - **動作確認**: 記事一覧が適切に表示される
    - _要件: 2.3_

  - [ ] 1.1.4 記事詳細表示と高速遷移
    - 記事詳細ページ実装
    - 0.5秒以内の遷移実現（React Router、コード分割）
    - 読みやすいレイアウト設計
    - **動作確認**: 記事クリック→詳細表示の速度測定
    - **テスト**: 遷移時間が0.5秒以内であることを確認
    - _要件: 2.4_

  - [ ] 1.1.5 無限スクロール実装
    - Intersection Observer API使用
    - ページネーション処理
    - ローディング状態表示
    - **動作確認**: スクロールで追加記事が読み込まれる
    - **テスト**: 無限スクロールの動作確認
    - _要件: 2.5_

### フェーズ2: 要件3対応 - 親しみやすく楽しいUI

**ユーザーストーリー**: ヲタク趣味を持つエンジニアとして、スマホとPCの両方で親しみやすく楽しいUIでニュースを読みたい

- [ ] 2.1 テーマシステム実装
  - [ ] 2.1.1 ダーク/ライトモード切り替え
    - ThemeToggle コンポーネント作成
    - Tailwind CSS ダークモード設定
    - ローカルストレージでの設定保存
    - システム設定との連携
    - **動作確認**: テーマ切り替えが即座に反映される
    - **テスト**: 設定が永続化されることを確認
    - _要件: 3.1_

  - [ ] 2.1.2 アニメーション効果実装
    - Framer Motion セットアップ
    - ページ遷移アニメーション
    - カード表示アニメーション
    - タッチ・マウス操作対応
    - **動作確認**: 滑らかなアニメーション動作
    - _要件: 3.2_

  - [ ] 2.1.3 カスタムテーマカラー設定
    - テーマカラー選択UI実装
    - CSS変数での色管理
    - プリセットカラーパレット
    - **動作確認**: テーマカラー変更が全体に反映される
    - **テスト**: 複数のテーマカラーで表示確認
    - _要件: 3.3_

  - [ ] 2.1.4 マイクロインタラクション実装
    - 記事読了時の達成感演出
    - ブックマーク追加時のアニメーション
    - ボタンホバー・タップエフェクト
    - **動作確認**: 各インタラクションが適切に動作
    - _要件: 3.4_

### フェーズ3: 要件1対応 - ニュース収集と表示

**ユーザーストーリー**: 30代金融系エンジニアとして、最新の金融・IT系ニュースを効率的に収集したい

- [ ] 3.1 データ取得レイヤー実装
  - [ ] 3.1.1 APIクライアント抽象化
    - APIクライアントインターフェース作成
    - モックAPI実装（開発環境用）
    - 環境別API切り替え機能
    - エラーハンドリング

  - [ ] 3.1.2 状態管理セットアップ
    - Zustand ストア作成
    - 記事データ管理
    - カテゴリデータ管理
    - ローディング・エラー状態管理
    - **動作確認**: 状態管理が正しく動作
    - _要件: 1.1, 1.2_

  - [ ] 3.1.3 モックデータ充実化
    - 50件以上のモック記事データ作成
    - 金融・IT・フィンテック関連カテゴリ
    - 信頼性の高いソース名設定
    - **動作確認**: 多様なニュースが表示される
    - **テスト**: 1日50件以上の記事が表示されることを確認
    - _要件: 1.3, 1.4_

  - [ ] 3.1.4 記事優先順位表示
    - 最新記事ソート機能
    - 重要度による優先表示
    - カテゴリ別フィルタリング
    - **動作確認**: 最新記事が上位に表示される
    - **テスト**: ソート機能の動作確認
    - _要件: 1.2_

### フェーズ4: 要件5対応 - 技術系記事の効率的検索

**ユーザーストーリー**: ソフトウェア技術に興味があるエンジニアとして、技術系記事を効率的に見つけたい

- [ ] 4.1 技術カテゴリ実装
  - [ ] 4.1.1 技術カテゴリ定義
    - AI・機械学習カテゴリ
    - ブロックチェーンカテゴリ
    - クラウド技術カテゴリ
    - その他技術カテゴリ
    - カテゴリアイコン設定
    - **動作確認**: 技術カテゴリが表示される
    - _要件: 5.1_

  - [ ] 4.1.2 技術レベル表示
    - 記事に技術レベルバッジ追加（初級・中級・上級）
    - モックデータに技術レベル設定
    - フィルタリング機能
    - **動作確認**: 技術レベルが視覚的に分かる
    - **テスト**: レベル別フィルタリング動作確認
    - _要件: 5.2_

  - [ ] 4.1.3 検索機能実装
    - SearchBar コンポーネント作成
    - キーワード検索機能
    - 関連記事の優先表示
    - 検索結果ハイライト
    - **動作確認**: キーワード検索が正しく動作
    - **テスト**: 複数キーワードでの検索確認
    - _要件: 5.3_

  - [ ] 4.1.4 読了時間表示
    - 記事の文字数から読了時間計算
    - 各記事カードに読了時間表示
    - **動作確認**: 読了時間が適切に表示される
    - _要件: 5.4_

### フェーズ5: 要件6対応 - ブックマーク機能

**ユーザーストーリー**: 休日にだらだらと過ごすエンジニアとして、後で読む機能で気になる記事を保存したい

- [ ] 5.1 ブックマーク機能実装
  - [ ] 5.1.1 ブックマーク操作
    - BookmarkButton コンポーネント作成
    - ワンクリックでブックマーク追加・削除
    - ローカルストレージでの管理
    - UI状態の同期
    - **動作確認**: ブックマーク追加・削除が即座に反映
    - **テスト**: ブックマーク状態の永続化確認
    - _要件: 6.1_

  - [ ] 5.1.2 ブックマーク一覧ページ
    - ブックマーク専用ページ作成
    - 保存日時順ソート
    - カテゴリ別整理機能
    - **動作確認**: ブックマーク一覧が正しく表示
    - **テスト**: ソート・フィルタリング動作確認
    - _要件: 6.3, 6.4_

  - [ ] 5.1.3 オフライン閲覧機能
    - Service Worker実装
    - ブックマーク記事のキャッシュ
    - オフライン状態の検出と表示
    - **動作確認**: オフラインでブックマーク記事が閲覧可能
    - **テスト**: ネットワーク切断時の動作確認
    - _要件: 6.2_

### フェーズ6: 要件4対応 - プッシュ通知機能

**ユーザーストーリー**: 忙しいエンジニアとして、重要なニュースを見逃さないよう通知機能を利用したい

- [ ] 6.1 通知設定UI実装
  - [ ] 6.1.1 通知設定画面
    - NotificationSettings コンポーネント作成
    - カテゴリ別通知ON/OFF設定
    - 通知頻度設定（即座・1時間毎・1日毎）
    - 静寂時間設定
    - ローカルストレージでの設定保存
    - **動作確認**: 通知設定が保存・反映される
    - **テスト**: 各設定項目の動作確認
    - _要件: 4.2, 4.4_

  - [ ] 6.1.2 Web Push Subscription管理（モック）
    - ブラウザ通知許可の取得UI
    - Push Subscription登録フロー（モック）
    - 通知プレビュー機能
    - **動作確認**: 通知許可フローが正しく動作
    - _要件: 4.1_

  - [ ] 6.1.3 通知ロジック実装（モック）
    - 重要度判定ロジック（モック）
    - 時間帯フィルタリング
    - 緊急ニュース即時通知（モック）
    - **動作確認**: 通知条件が正しく判定される
    - **テスト**: 各通知条件での動作確認
    - _要件: 4.1, 4.3_

### フェーズ7: AWS統合とバックエンド構築

- [ ] 7.1 AWS Amplify環境構築
  - [ ] 7.1.1 Amplify CLI初期化
    - AWS Amplify CLIインストール
    - プロジェクト初期化
    - 認証設定（オプション）

  - [ ] 7.1.2 AppSync GraphQL API設定
    - GraphQLスキーマ定義（Article、Category型）
    - DynamoDB テーブル設計と作成
    - Direct Resolvers設定（listArticles、getArticle、listCategories）
    - **動作確認**: GraphQL APIが正しく動作

  - [ ] 7.1.3 フロントエンドAPI切り替え
    - モックAPIから本番APIへの切り替え
    - 環境変数での制御
    - **動作確認**: 本番APIでデータ取得できる
    - **テスト**: モック・本番両環境での動作確認

- [ ] 7.2 ニュース取得Lambda実装
  - [ ] 7.2.1 外部API統合Lambda
    - NewsAPI連携機能
    - RSS Feedパーサー実装
    - データ正規化・クリーニング処理
    - **テスト**: 外部APIからデータ取得できる

  - [ ] 7.2.2 記事分類・処理ロジック
    - カテゴリ自動分類
    - 技術レベル判定
    - 読了時間計算
    - DynamoDBへの保存
    - **テスト**: 記事が正しく分類・保存される

  - [ ] 7.2.3 定期実行スケジューラー
    - EventBridge設定（15分毎実行）
    - Lambda トリガー設定
    - エラーハンドリング
    - **動作確認**: 定期的にニュースが更新される

- [ ] 7.3 プッシュ通知Lambda実装
  - [ ] 7.3.1 Push Subscription管理
    - DynamoDB PushSubscriptionsテーブル作成
    - Subscription登録・削除API
    - **テスト**: Subscription管理が正しく動作

  - [ ] 7.3.2 通知配信Lambda
    - Web Push API統合
    - ユーザー設定に基づくフィルタリング
    - 新記事投稿時の自動通知
    - **動作確認**: 実際に通知が配信される
    - **テスト**: 各通知条件での配信確認

### フェーズ8: パフォーマンス最適化

- [ ] 8.1 コード分割と最適化
  - [ ] 8.1.1 動的インポート実装
    - React.lazy によるコード分割
    - ルートベースの分割
    - 画像の遅延読み込み
    - **テスト**: バンドルサイズ削減確認

  - [ ] 8.1.2 キャッシュ戦略実装
    - SWR/React Query導入
    - AppSyncクエリキャッシュ
    - 画像キャッシュ最適化
    - **動作確認**: キャッシュが正しく動作
    - **テスト**: パフォーマンス改善確認

### フェーズ9: デプロイメント

- [ ] 9.1 デプロイメント準備
  - [ ] 9.1.1 デプロイメントドキュメント作成
    - DEPLOYMENT.md作成
    - AWS環境セットアップガイド
    - 環境変数設定ガイド
    - トラブルシューティングガイド

  - [ ] 9.1.2 本番環境デプロイ
    - AWS Amplify本番デプロイ
    - 環境変数とシークレット管理
    - CI/CDパイプライン設定
    - **動作確認**: 本番環境で全機能が動作

  - [ ] 9.1.3 ドメイン設定
    - カスタムドメイン設定
    - SSL証明書設定
    - CloudFront CDN最適化
    - **動作確認**: カスタムドメインでアクセス可能

  - [ ]* 9.1.4 監視設定
    - CloudWatch監視設定
    - エラーアラート設定
    - パフォーマンス監視ダッシュボード

### フェーズ10: 最終調整

- [ ] 10.1 エラーハンドリング強化
  - ユーザーフレンドリーなエラー表示
  - オフライン状態の適切な処理
  - フォールバック機能の実装
  - **テスト**: 各種エラーケースの動作確認

- [ ]* 10.2 アクセシビリティ対応
  - ARIA属性の適切な設定
  - キーボードナビゲーション対応
  - スクリーンリーダー対応
  - **テスト**: アクセシビリティチェック